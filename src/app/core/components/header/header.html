<!-- app.html -->
<div class="surface-card shadow-2 px-3 py-2 flex align-items-center justify-content-between">
  <div class="flex align-items-center gap-3">
    <a href="https://github.com" target="_blank">
      <i class="pi pi-github text-3xl text-color-secondary hover:text-primary cursor-pointer transition-colors transition-duration-200"></i>
    </a>
    <div class="hidden lg:flex align-items-center gap-2">
      @for (item of navItems(); track item.label) {
        @if (item.items) {
          <p-button [label]="item.label" icon="pi pi-angle-down" iconPos="right" [text]="true" [severity]="'secondary'" (onClick)="menu.toggle($event)"/>
          <p-menu #menu [model]="item.items" [popup]="true"/>
        } @else {
          <p-button [label]="item.label" [text]="true" [severity]="'secondary'" (onClick)="navigateTo(item['route'])"/>
        }
      }
    </div>
    <p-button icon="pi pi-bars" [text]="true" [severity]="'secondary'" class="lg:hidden" (onClick)="mobileMenu.toggle($event)"/>
    <p-menu #mobileMenu [model]="allNavItems()" [popup]="true"/>
  </div>
  <div class="flex align-items-center gap-2">
    <p-button [label]="currentLang().toUpperCase()" icon="pi pi-globe" [text]="true" [severity]="'secondary'" [size]="'small'" (onClick)="langMenu.toggle($event)"/>
    <p-menu #langMenu [model]="languages()" [popup]="true"/>
    <div class="hidden md:inline-block">
      <p-button icon="pi pi-bell" [text]="true" [severity]="'secondary'" [badge]="notificationCount().toString()" [badgeSeverity]="'danger'" (onClick)="notificationPopover.toggle($event)"/>
      <p-popover #notificationPopover>
        <div style="width: 320px; max-width: 90vw">
          <div class="p-3 border-bottom-1 surface-border">
            <h4 class="m-0 text-lg font-semibold">Notifications</h4>
          </div>
          <div class="p-2">
            @for (notification of notifications(); track notification.id) {
              <div class="p-3 hover:surface-hover cursor-pointer border-round mb-1 transition-colors transition-duration-150">
                <div class="flex align-items-start gap-3">
                  <i [class]="notification.icon + ' text-primary text-xl'"></i>
                  <div class="flex-1">
                    <p class="m-0 text-sm font-medium text-color">{{ notification.title }}</p>
                    <p class="m-0 text-xs text-color-secondary mt-1">{{ notification.time }}</p>
                  </div>
                </div>
              </div>
            }
          </div>
          <div class="p-2 border-top-1 surface-border text-center">
            <p-button label="View All" [text]="true" [size]="'small'"/>
          </div>
        </div>
      </p-popover>
    </div>
    <div class="hidden md:inline-block">
      <p-button [text]="true" [severity]="'secondary'" (onClick)="profileMenu.toggle($event)">
        <p-avatar label="JD" [size]="'normal'" shape="circle" styleClass="bg-primary text-primary-contrast"/>
      </p-button>
      <p-menu #profileMenu [model]="profileItems()" [popup]="true"/>
    </div>
    <p-button icon="pi pi-th-large" [text]="true" [severity]="'secondary'" (onClick)="appsPopover.toggle($event)"/>
    <p-popover #appsPopover>
      <div style="width: 280px">
        <div class="p-3 border-bottom-1 surface-border">
          <h4 class="m-0 text-lg font-semibold">Apps</h4>
        </div>
        <div class="grid p-2">
          @for (app of apps(); track app.id) {
            <div class="col-6">
              <div class="p-3 text-center hover:surface-hover cursor-pointer border-round transition-colors transition-duration-150">
                <i [class]="app.icon + ' text-4xl text-primary mb-2 block'"></i>
                <p class="m-0 text-sm font-medium text-color">{{ app.name }}</p>
              </div>
            </div>
          }
        </div>
      </div>
    </p-popover>
  </div>
</div>